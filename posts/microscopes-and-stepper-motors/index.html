<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Moving microscopes with stepper motors | Python Friends</title>
<link href="../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href=".">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-84570235-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84570235-4');
</script><meta name="author" content="Wytamma">
<meta name="robots" content="noindex">
<meta property="og:site_name" content="Python Friends">
<meta property="og:title" content="Moving microscopes with stepper motors">
<meta property="og:url" content="/posts/microscopes-and-stepper-motors/">
<meta property="og:description" content="The motorised stage of our auto-scope project is working!
Now that we have a platform to work on I thought I'd write a post about the motors we are using and how we can control them with Python.




O">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-08-27T00:00:00+10:00">
<meta property="article:tag" content="beginer">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
            styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
        
    <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="../../">Home</a>
        <a class="sidebar-nav-item" href="../../pages/about/">About</a>
        <a class="sidebar-nav-item" href="../../archive.html">Archive</a>
        <a class="sidebar-nav-item" href="../../categories/">Tags</a>
        <a class="sidebar-nav-item" href="https://github.com/python-friends/">GitHub</a>
    
    
    </nav>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          
    <h3 id="brand" class="masthead-title">
      <a href="../../" title="Python Friends" rel="home">Python Friends</a>
    </h3>

        </div>
      </div>

      <div class="container content" id="content">
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="post-title p-name entry-title" itemprop="headline name"><a href="." class="u-url">Moving microscopes with stepper motors</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Wytamma</span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="post-date published dt-published" datetime="2018-08-27T00:00:00+10:00" itemprop="datePublished" title="2018-08-27 00:00">2018-08-27 00:00</time></a></p>
        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>The <a class="reference external" href="../auto-scope-stage-driver/">motorised stage</a> of our auto-scope project is working!</p>
<p>Now that we have a platform to work on I thought I'd write a post about the motors we are using and how we can control them with Python.</p>
<div class="youtube-video align-center">
<iframe width="100%" height="315" src="https://www.youtube-nocookie.com/embed/3XsQCkF1SrE?rel=0&amp;wmode=transparent" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
</div>
<!-- TEASER_END -->
<div class="section" id="on-the-subject-of-stepper-motors">
<h2>On the subject of stepper motors</h2>
<p>There are a lot of turtorals and guides about stepper motors aviable online.
The most realevant refrence I have found is the video below "Stepper Motor Control with the Raspberry Pi" by Gaven MacDonald.
It is a comprehensive overview of how stepper motors work, and how to control one using the Raspberry Pi.</p>
<div class="youtube-video align-center">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/Dc16mKFA7Fo?rel=0&amp;wmode=transparent" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
</div>
<p>We are using 28BYJ-48 stepper motors with ULN2003 drivers; they are small, <a class="reference external" href="https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=m570.l1313&amp;_nkw=28BYJ-48&amp;_sacat=0">cheap</a>, and precise.
You can find some technical details <a class="reference external" href="http://robocraft.ru/files/datasheet/28BYJ-48.pdf">here</a>.</p>
<p>A stepper motor is a brushless DC motor that rotates in steps.
In contrast to a conventional brushed motor, that just spin, a stepper motor can be precisely positioned at any given step.
This high level of control allows us to postion our microscope stage at any X,Y coordinate with minimal error.</p>
<img alt="/images/Stepper_Motor_Half_Stepping.gif" class="align-center" src="../../images/Stepper_Motor_Half_Stepping.gif"><p>We will send a specific sequence of signals to the 4 control wires of the stepper motor that will in turn activate a magnetic field and rotate the core.
The GIF above shows a simplfied example of how our stepper motors work (if you'd like to see this in detial I suggest you watch Gaven's video above).</p>
</div>
<div class="section" id="making-things-move-with-python">
<h2>Making things move with Python</h2>
<p>To control motors with our code we require an interface between softwear and hardwear.
For our project we are using a <a class="reference external" href="https://www.raspberrypi.org/">Raspberry Pi</a>. A Raspberry Pi (RPi) is a tiny, cheap, computer.
These computers come equpied with programmable General Purpose Input Output (GPIO) pins.
These pins allow us to interact with the outside world, via electial signals.
Python provides an easy interface for controling the pins though it's RPi.GPIO library.</p>
<img alt="/images/raspberry-pi-motor-pins.jpg" class="align-center" src="../../images/raspberry-pi-motor-pins.jpg"><p>Let's start by wiring up our RPi as per the diagram above.</p>
<p>The specific GPIO pins we use doen't real matter,
we just have to know which pins we have used as we will refer to them in the code.</p>
<p>I've used pins 17, 22, 23, 24 and they are connected inputs 1, 2, 3, 4 on the motor driver respectivly.
For power I've connect a 5V power pin to the postive (+) terminal on the motor driver and the same for ground and negative (-).</p>
<p>The (<a class="reference external" href="https://www.medium.com/">stolen</a>) code below will turn the motor 360˚.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_891305c6b21745f8827eec52951fdd46-1"> 1</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-2"> 2</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-3"> 3</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-4"> 4</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-5"> 5</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-6"> 6</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-7"> 7</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-8"> 8</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-9"> 9</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-10">10</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-11">11</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-12">12</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-13">13</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-14">14</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-15">15</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-16">16</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-17">17</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-18">18</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-19">19</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-20">20</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-21">21</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-22">22</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-23">23</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-24">24</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-25">25</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-26">26</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-27">27</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-28">28</a>
<a href="#rest_code_891305c6b21745f8827eec52951fdd46-29">29</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_891305c6b21745f8827eec52951fdd46-1"></a><span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="kn">as</span> <span class="nn">GPIO</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-2"></a><span class="kn">import</span> <span class="nn">time</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-3"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-4"></a><span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-5"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-6"></a><span class="n">control_pins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-7"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-8"></a><span class="k">for</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">control_pins</span><span class="p">:</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-9"></a>    <span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-10"></a>    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-11"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-12"></a><span class="n">halfstep_seq</span> <span class="o">=</span> <span class="p">[</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-13"></a>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-14"></a>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-15"></a>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-16"></a>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-17"></a>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-18"></a>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-19"></a>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-20"></a>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-21"></a><span class="p">]</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-22"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-23"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">512</span><span class="p">):</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-24"></a>    <span class="k">for</span> <span class="n">halfstep</span> <span class="ow">in</span> <span class="n">halfstep_seq</span><span class="p">:</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-25"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">halfstep</span><span class="p">):</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-26"></a>            <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">control_pins</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">)</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-27"></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-28"></a>
<a name="rest_code_891305c6b21745f8827eec52951fdd46-29"></a><span class="n">GPIO</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></td>
</tr></table>
<p>Lets go though what is happening line by line.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_9a2c1430b4824023a1ab9ed517bb10db-1">1</a>
<a href="#rest_code_9a2c1430b4824023a1ab9ed517bb10db-2">2</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_9a2c1430b4824023a1ab9ed517bb10db-1"></a><span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="kn">as</span> <span class="nn">GPIO</span>
<a name="rest_code_9a2c1430b4824023a1ab9ed517bb10db-2"></a><span class="kn">import</span> <span class="nn">time</span>
</pre></td>
</tr></table>
<p>On the first 2 lines we import some required packages.
There are over 150,000 Python packages on The Python Package Index (PyPI).
So this import statment help us define which packages we'll be using.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_a50ce7433f144ea782407e4a59345521-4">4</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_a50ce7433f144ea782407e4a59345521-4"></a><span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>
</pre></td>
</tr></table>
<p>On line 4 we set the mode of the of the GPIO pins to BCM,
this allows us to select GPIO pins based on name instead of postion.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_c2407b3eac964c8d911d19d01fba479f-6">6</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_c2407b3eac964c8d911d19d01fba479f-6"></a><span class="n">control_pins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
</pre></td>
</tr></table>
<p>On line 6 we define a list of GIPO pins that we'll use to control the motor.
It's important to remember that in Python the list index starts at 0.
If you wanted to access the second element of this list you would use control_pins[1].
See <a class="reference external" href="http://python-history.blogspot.com/2013/10/why-python-uses-0-based-indexing.html">this blog</a>
if you're wondering why (Don).</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-8"> 8</a>
<a href="#rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-9"> 9</a>
<a href="#rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-10">10</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-8"></a><span class="k">for</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">control_pins</span><span class="p">:</span>
<a name="rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-9"></a>    <span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<a name="rest_code_d3f0c5017dbc4c6d8b48e7b68820e8fe-10"></a>    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></td>
</tr></table>
<p>We use a <cite>for</cite> loop on line 8 to iterate through each element (pin) <cite>in</cite> the control_pins list.
This alows us to setup and set the intial output of each pin on lines 9 and 10.</p>
<pre class="code python"><a name="rest_code_f5606d2f356246dfb153af4ba770706e-1"></a><span class="n">halfstep_seq</span> <span class="o">=</span> <span class="p">[</span>
<a name="rest_code_f5606d2f356246dfb153af4ba770706e-2"></a>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<a name="rest_code_f5606d2f356246dfb153af4ba770706e-3"></a>    <span class="o">...</span>
<a name="rest_code_f5606d2f356246dfb153af4ba770706e-4"></a>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<a name="rest_code_f5606d2f356246dfb153af4ba770706e-5"></a><span class="p">]</span>
</pre>
<p>We define the complete sequence of signals required for one cycle with half stepping on line 12.
The 1's and 0's tell us which pins should be off(0) or on(1).
This <cite>halfstep_seq</cite> variable is a list of list.
To access the first element of the first nested list, we can use the notation halfstep_seq[0][0], which returns 1.
We'll use this nested list indexing to turn our motor.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_706b5f43dbe6489dbbf55cd595c7e8f6-1">1</a>
<a href="#rest_code_706b5f43dbe6489dbbf55cd595c7e8f6-2">2</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_706b5f43dbe6489dbbf55cd595c7e8f6-1"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">512</span><span class="p">):</span>
<a name="rest_code_706b5f43dbe6489dbbf55cd595c7e8f6-2"></a>    <span class="o">...</span>
</pre></td>
</tr></table>
<p>The main logic of our script can be found in the nested for loops on lines X to Y.
The <cite>range(n)</cite> function returns a list of integers from 0 to n. So range(3) returns [0,1,2].
In our first for loop, we use range to create a list of 512 integers
(the of steps number required for one required for one revolution).</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_442fc6b71d1741689127b3ed64df7f10-1">1</a>
<a href="#rest_code_442fc6b71d1741689127b3ed64df7f10-2">2</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_442fc6b71d1741689127b3ed64df7f10-1"></a><span class="k">for</span> <span class="n">halfstep</span> <span class="ow">in</span> <span class="n">halfstep_seq</span><span class="p">:</span>
<a name="rest_code_442fc6b71d1741689127b3ed64df7f10-2"></a>    <span class="o">...</span>
</pre></td>
</tr></table>
<p>We then cycle through each halfstep in the halfstep_seq,
each halfstep being a list of length 4 with the state of each pin for that step.</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_b04fd6c812164b41bc4eaff016faaed0-1">1</a>
<a href="#rest_code_b04fd6c812164b41bc4eaff016faaed0-2">2</a>
<a href="#rest_code_b04fd6c812164b41bc4eaff016faaed0-3">3</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_b04fd6c812164b41bc4eaff016faaed0-1"></a><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">halfstep</span><span class="p">):</span>
<a name="rest_code_b04fd6c812164b41bc4eaff016faaed0-2"></a>    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">control_pins</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">val</span><span class="p">)</span>
<a name="rest_code_b04fd6c812164b41bc4eaff016faaed0-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
</pre></td>
</tr></table>
<p>In our final for loop, we set each of the control pins to the appropriate state.
We use the <cite>enumerate</cite> function to return the index and value of each element in the halfstep list.
We use the index (i) to access the correct pin, and set its corresponding value (val).</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_d336da2ea4d5405ca6578a163dd6af92-1">1</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_d336da2ea4d5405ca6578a163dd6af92-1"></a><span class="n">GPIO</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></td>
</tr></table>
<p>On the final line, we clean up the GIPO pins.</p>
<p>And that's it, running these X lines of code will turn the attached stepper motor 360˚.
You can try playing with the 512 value to change the amount the motor will turn.
If you're feeling confident, you could even try to generalise this code into a function (or wait for our next post).</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/beginer/" rel="tag">beginer</a></li>
        </ul></nav></aside></article>
</div>
    </div>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    
    
    
            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
